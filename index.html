<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÂçáÁ©∫Ê®°ÊãüÂô®</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap');

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #333;
            font-family: 'Montserrat', sans-serif;
        }

        .phone-screen {
            width: 375px; 
            height: 667px; 
            background-color: #f0f0f0;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
        }

        .header {
            width: 100%;
            padding: 10px;
            background-color: #F28444;
            color: white;
            text-align: left;
            font-size: 18px;
            font-family: 'KaiTi', 'Ê•∑‰Ωì', serif; 
            position: absolute;
            top: 0;
            left: 0;
        }

        .center {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            width: 100%;
        }

        .character {
            width: 50%;
            animation: float 3s infinite;
        }

        #newsContainer {
            position: fixed;
            top: 60px; 
            left: 50%; 
            transform: translate(-50%, -50%);  /* ÂÆåÂÖ®Â±Ö‰∏≠ */
            width: 375px
            background-color: #f1f1f1;
            overflow: hidden;
            height: 28px; 
            display: none;
        }

        #newsText {
            position: relative;
            white-space: nowrap;
            animation: scroll 15s linear infinite; 
        }

        @keyframes scroll {
            from { left: 100%; }
            to { left: -100%; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .footer {
            width: 100%;
            padding: 10px;
            display: flex;
            justify-content: flex-end;
            align-items: flex-end;
            position: absolute;
            bottom: 20px; 
        }

        .circle-button {
            width: 63px;
            height: 63px;
            background: radial-gradient(circle, #F29E38, #fbd78f); 
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 10px;
            position: absolute;

            text-shadow: 0px 0px 1px rgba(0, 0, 0, 0.7);
        }

        .circle-button:hover {
            background: linear-gradient(145deg, #ffca9e, #FFFFC1); 
            transform: scale(1.1); 
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4), inset 0 2px 4px rgba(255, 255, 255, 0.5); 
        }

        .circle-button:active {
            background: linear-gradient(145deg, #F28444, #bf6630); 
            box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.4); 
            transform: scale(0.95);
        }

        .gacha-button {
            bottom: 0;
            left: 110px; 
        }

        .love-button {
            bottom: 0;
            right: 30px; 
        }

        .news-button {
            bottom: 0;
            left: 30px;
        }

        .message {
            display: none;
            position: absolute;
            right: 0;
            bottom: 100px;
            font-size: 16px;
            color: #333;
            padding: 10px;
            background-color: #f0f0f0;
            border-radius: 5px;
            transform: translateX(-50%) translateY(100%); 
            opacity: 0; 
        }

        .message.show {
            display: block;
            animation: slide-up 2s forwards; 
        }

        @keyframes slide-up {
            0% {
                transform: translateX(-50%) translateY(100%); 
                opacity: 0; 
            }
            50% {
                transform: translateX(-50%) translateY(0); 
                opacity: 1;
            }
            100% {
                transform: translateX(-50%) translateY(-100%); 
                opacity: 0; 
            }
        }

        .player {
            position: absolute;
            left: 50%;
            top: 70%;
            transform: translate(-50%, -50%);
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }

        .player-button {
            padding: 15px 15px;
            font-size: 18px;
            cursor: pointer;
            background-color: transparent;
            border: none;
            color: #333;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .player-button:hover {
            background-color: rgba(240, 240, 240, 0.2);
        }

        .player-button:active {
            transform: translateY(4px);
        }

        .gacha-modal {
            position: absolute;
            top: 0;
            left: -20px;
            width: 100%;
            height: 100%;
            background-color: #f0f0f0;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center; 
            padding: 20px;
        }

        .close-button {
            position: absolute;
            top: 10px;
            right: 22px;
            background: linear-gradient(145deg, #f3a870, #e08b4b);
            color: #fff;
            border: none;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 4px rgba(0, 0, 0, 0.3), inset 0 2px 4px rgba(255, 255, 255, 0.5);
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

        .close-button:hover {
            background: linear-gradient(145deg, #ffca9e, #e8a978); 
            transform: scale(1.1); 
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4), inset 0 2px 4px rgba(255, 255, 255, 0.5); 
        }

        .close-button:active {
            background: linear-gradient(145deg, #d97a42, #bf6630); 
            box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.4); 
            transform: scale(0.95);
        }

        #special-effect-container {
            display: none;
            position: fixed;
            top: 25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            font-weight: bold;
            color: gold;
            z-index: 1000;
            animation: slideUpFadeOut 3s ease-in-out; 
        }

        @keyframes slideUpFadeOut {
            0% {
                opacity: 0;
                transform: translate(-50%, 50px); /* ÂàùÂßã‰ΩçÁΩÆÂú®‰∏ãÊñπ */
            }
            30% {
                opacity: 1;
                transform: translate(-50%, 0); /* ÁßªÂä®Âà∞ÁõÆÊ†á‰ΩçÁΩÆ */
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -30px); /* ÊúÄÁªà‰ΩçÁΩÆÁ®çÂæÆÂêë‰∏ä */
            }
        }

        #card-container {
            margin: 10px auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            width: 90%;
            max-width: 600px;
            background-color: #f0f0f0;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            padding: 10px;
        }
        .card-row {
            display: flex;
            justify-content: center;
            gap: 5px;
        }
        .card {
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2em;
            border-radius: 10px;
            color: #fff;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            transition: transform 0.5s;
        }
        .gold-card {
            background-color: #FFD600;
        }
        .purple-card {
            background-color: #C466FA;
        }
        .blue-card {
            background-color: #B6E4FF;
        }
        .card.flip {
            transform: rotateY(180deg);
        }
        .bling {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1em;
            color: gold;
            animation: bling 1s infinite;
        }
        @keyframes bling {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        #result {
            margin-top: 10px;
            font-size: 1em;
        }

        /*ÂõæÈâ¥ÊäΩÂç°ÊåâÈíÆ*/
        button {
            padding: 10px 15px;
            font-size: 1em;
            cursor: pointer;
            margin: 5px;
        }
        /*ÂçÅËøûÊåâÈíÆ*/
        .button-container button {
            padding: 12px 20px;
            font-size: 1em;
            cursor: pointer;
            margin: 5px;
            border-radius: 8px;
            border: none;
            background: linear-gradient(145deg, #fbd78f, #eb9e62);
            color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }

        .button-container button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
            background: linear-gradient(145deg, #eb9e62, #fbd78f);
        }

        .button-container button:active {
            transform: scale(0.95); 
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); 
            background: linear-gradient(145deg, #d38850, #f1c27d); 
        }

        .page-btn {
            display: inline-block;
            margin: 2px;
            padding: 5px 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            cursor: pointer;
        }
        .active-page {
            background-color: #ccc;
        }
        .ellipsis {
            pointer-events: none;
            cursor: default;
        }
        
        #stats-container {
            display: none;
            margin-top: 10px;
            text-align: center;
            width: 90%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        #pokedex-container {
            display: none;
            margin-top: 10px;
            text-align: center;
            width: 90%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        #pokedex-list {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .pokedex-row {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        .pokedex-item {
            width: 60px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
            text-align: center;
        }
        .pokedex-item.unobtained {
            background-color: #eee;
            color: #999;
        }

        @media (max-width: 600px) {
            .card {
                width: 50px;
                height: 50px;
                font-size: 1em;
            }
            button {
                padding: 8px 12px;
                font-size: 0.9em;
            }
            #result {
                font-size: 0.9em;
            }
            .button-container button {
                padding: 9.5px 16.5px;
                font-size: 1em;
                margin: 4px;
                border-radius: 6px;
            }

            #stats-container {
                font-size: 0.3em;
            }
            
            .pokedex-row {
                display: flex;
                justify-content: flex-start; 
                gap: 10px;
            }
            .pokedex-item {
                width: 50px;
                font-size: 0.3em; 
            }
        }    
    </style>
</head>
<body>
    <div class="phone-screen">
        <div class="header" id="header">Lv.80 ÊàëÊòØË∞ÅÔºü</div>
        <div id="newsContainer">
            <div id="newsText"></div>
        </div>

        <div class="center">
            <img src="" class="character" id="characterImage">

        <div class="player">
            <button class="player-button" onclick="playPrevious()">&#9664;</button>
            <button class="player-button" id="playPauseBtn" onclick="togglePlayPause()">‚óâ</button>
            <button class="player-button" onclick="playNext()">&#9654;</button>
        </div>

        <audio id="audioPlayer"></audio>

        <div class="gacha-modal" id="gachaModal">
            <button class="close-button" onclick="closeGacha()">x</button>
            <div id="special-effect-container"></div>
            <div id="card-container">
            </div>

            <div class="button-container">
                <button onclick="togglePokedex()">ÂõæÈâ¥</button>
                <button onclick="toggleStats()">ÁªüËÆ°</button>
                <button onclick="drawCard()">ÂçïÊäΩ</button>
                <button onclick="drawMultipleCards()">ÂçÅËøû</button>                
            </div>
            <div id="result"></div>
           
            <div id="stats-container">
                <div id="stats-list"></div>
            </div>

            <div id="pokedex-container">
                <div id="pokedex-list"></div>
            </div>
        </div>

        <div class="footer">
            <button class="circle-button gacha-button" id="gachaButton" onclick="openGacha()">ÊäΩÂç°</button>
            <button class="circle-button love-button" id="loveButton" onclick="showText()">‚ù§</button>
            <div id="message" class="message">ÂäüÂæ∑+1</div>
            <button class="circle-button news-button" id="newsButton">Êñ∞Èóª</button>
        </div>
    </div>

    <audio id="backgroundMusic" loop>
        <source src="bgm/bgm.mp3" type="audio/mpeg">
    </audio>

    <audio id="drawSound" src="gacha.mp3" preload="auto"></audio>

    <script>
        const newsButton = document.getElementById('newsButton');
        const newsContainer = document.getElementById('newsContainer');
        const newsText = document.getElementById('newsText');
        let newsVisible = false;

        const newsList = [
            "Âø´ËÆØ: ÂÖîÁêÉÁêÉÂç†È¢Ü‰πåÈ≤ÅÈ≤ÅÊòü",
            "Âø´ËÆØ: Ëä•Êú´Á´†Á´†Áªü‰∏ÄÂà©Ëé´Èáå‰∫ö",
            "Âø´ËÆØÔºöËßÇÊµãÂà∞Ëà™Â§©‰ºÅÈπÖÂú®Â§ñÂ§™Á©∫È£ûË°å",
            "‰∏¥Á©∫Â∏ÇÂèëÁé∞ÊµÅÊµ™‰ΩìÊé•Ëøë‰ø°Âè∑,ËØ∑Â∏ÇÊ∞ëÊúãÂèãÊ≥®ÊÑèÈöêËîΩ",
            "Ê∑±Á©∫ÈößÈÅìÂèëÁîüÊú™Áü•ËÉΩÈáèÊ≥¢Âä®",
            "ÈïøÊÅíÂ±±Âá∫Áé∞Á•ûÁßòËÉΩÈáèÁàÜÂèë",
            "‰∏¥Á©∫Â∏ÇÁßëÁ†îÂõ¢ÈòüÂèëÁé∞Êñ∞ÂûãÊµÅÊµ™‰Ωì",
            "Ê∑±Á©∫ÈößÈÅì‰º†Êù•Êú™Áü•‰ø°Âè∑ÔºåËà™Â§©ÁΩ≤Á¥ßÊÄ•ÂìçÂ∫î",
            "‰∏¥Á©∫Â∏ÇËÆ°ÂàíÂª∫ËÆæÊñ∞ÂûãÊµÅÊµ™‰ΩìÊé¢ÊµãÂô®",
            "TwinkleÊΩÆÁé©Êñ∞Ê¨æÂèëÂ∏ÉÔºåÂå∫Âüü‰∏ì‰∫´ÂºïÂèëÁÉ≠ËÆÆ",
            "AksoÂåªÈô¢Á†îÁ©∂ËäØÊ∫ê‰ªãÂÖ•ÁóáÊ∫êÂ§¥",
            "TwinkleÊΩÆÁé©ÂÆ£Â∏ÉËøõÈ©ªËä±Êµ¶Âå∫",
            "Ëà™Â§©ÁΩ≤Âä†Âº∫ÈïøÊÅíÂ±±Âå∫ÂüüÁõëÊéß",
            "Â∏ΩÂÑøÂ≤õÈôÑËøëÊµ∑ÂüüÂá∫Áé∞Á•ûÁßòÂÖâÊü±",
            "Áåé‰∫∫Âçè‰ºöË≠¶ÂëäÁôΩÊ≤ôÊπæÁîüÁâ©ÂºÇÂèò",
            "TwinkleÊΩÆÁé©ÂèëÂ∏ÉÊòüÈôÖÈôêÈáèÁâàÁé©ÂÅ∂",
            "Á¶ÅÁåéÂå∫Áé∞Â§ßÈáèÊú™Áü•È£ûË°åÁâ©",
            "Èõ™ÁªíÈïáÂ±ÖÊ∞ëÊä•ÂëäÈïøÊÅíÂ±±ÂºÇÂ∏∏",
            "Ëä±Êµ¶Âå∫ÂèëÁé∞Á•ûÁßòÂú∞‰∏ãÈÄöÈÅì",
            "ÁôΩÊ≤ôÊπæÈôÑËøëÂèëÁé∞Êú™Áü•ÁîüÁâ©Áæ§",
            "ÈïøÊÅíÂ±±ËÉΩÈáèÊ≥¢Âä®ÂΩ±ÂìçÊ∑±Á©∫Ëà™Á∫ø",
            "EverÈõÜÂõ¢Â±ïÂºÄÈïøÊÅíÂ±±Ê∑±Â∫¶Êé¢Êµã",
            "ÊµÅÊµ™‰ΩìÊé•ËøëÂØºËá¥Ê∑±Á©∫ÈößÈÅìÂºÇÂ∏∏",
            "Á¶ÅÁåéÂå∫ÂÜÖÂèëÁé∞ÈªëÁåéË°åË∏™",
            "ÈïøÊÅíÂ±±‰∏ãÂèëÁé∞Âè§ËÄÅËÉΩÈáèË£ÖÁΩÆ",
            "EverÈõÜÂõ¢Êî∂Ë¥≠Â∏ΩÂÑøÂ≤õËÉΩÊ∫êÂÖ¨Âè∏,‰º†ÈóªCEO‰∏∫ÊµÅÊµ™‰Ωì",
            "AksoÂåªÈô¢ÂºÄÂ±ïËäØÊ∫ê‰ªãÂÖ•Áóá‰∏¥Â∫äËØïÈ™å",
            "‰ªäÊó•ÁßëÊäÄÁ™ÅÁ†¥ÔºåŒ±-P0159Âè∑Â§©‰ΩìËßÇÊµãÂèñÂæóÊñ∞ËøõÂ±ï",
            "AIÊäÄÊúØÈù©ÂëΩÔºöOTTOÂ∞ÜÊîπÂèòÊú™Êù•Â∑•‰ΩúÊñπÂºè",
            "ÁßëÂ≠¶ÂÆ∂ÂèëÁé∞ÂèØËÉΩÂª∂ÈïøÂØøÂëΩÁöÑÂÖ≥ÈîÆÂü∫Âõ†",
            "ÁîµÂΩ±‰∏öËì¨ÂãÉÂèëÂ±ïÔºåÂÖâÁåéÂ§ßÁâáÁ•®ÊàøÁ†¥Á∫™ÂΩï",
            "Â§™Á©∫Êé¢Á¥¢ÂÜçËøõ‰∏ÄÊ≠•Ôºå‰∫∫Á±ªÊàñÂ∞ÜÂú®Êú™Êù•ÂçÅÂπ¥Áôª‰∏äËè≤ÁΩóÊñØÊòü",
            "‰∫∫Á±ªÂü∫Âõ†ÁºñËæëÊäÄÊúØÂºïÂèë‰º¶ÁêÜ‰∫âËÆÆÔºåÁßëÂ≠¶ÁïåÁÉ≠ËÆÆ‰∏çÊñ≠"
        ];

        let newsIndex = 0;  

        function getNextNews() {
            newsIndex = (newsIndex + 1) % newsList.length;  // Âæ™ÁéØÊòæÁ§∫Êñ∞Èóª
            return newsList[newsIndex];
        }

        function startNews() {
            newsText.textContent = getNextNews();
            newsContainer.style.display = 'block';

            newsText.addEventListener('animationiteration', () => {
                newsText.textContent = getNextNews();
            });
        }

        newsButton.addEventListener('click', () => {
            newsVisible = !newsVisible;
            
            if (newsVisible) {
                startNews();
                newsButton.textContent = 'ÈöêËóè';
            } else {
                newsContainer.style.display = 'none';
                newsButton.textContent = 'Êñ∞Èóª';
            }
        });

        function showText() {
            var message = document.getElementById("message");
            message.classList.add("show");
            
            setTimeout(function() {
                message.classList.remove("show");
            }, 2000); 
        }

        const characters = [
            'img/1.png',
            'img/2.png',
            'img/3.png',
            'img/4.png',
            'img/5.png',
            'img/6.png',
            'img/7.png',
            'img/8.png',
            'img/9.png',
            'img/10.png',
            'img/11.png',
            'img/12.png',
            'img/13.png',
            'img/14.png',
            'img/15.png',
            'img/16.png'
        ];

        function getRandomCharacter() {
            const index = Math.floor(Math.random() * characters.length);
            return characters[index];
        }

        document.getElementById('characterImage').src = getRandomCharacter();


        const songs = ["bgm/song1.mp3", "bgm/song2.mp3", "bgm/song3.mp3"];
        let currentSongIndex = 0;
        let isPlaying = false;

        const audioPlayer = document.getElementById("audioPlayer");
        const playPauseBtn = document.getElementById("playPauseBtn");

        function playRandomSong() {
            currentSongIndex = Math.floor(Math.random() * songs.length);
            loadSong();
        }

        function togglePlayPause() {
            if (isPlaying) {
                audioPlayer.pause();
                playPauseBtn.textContent = "‚óâ";
            } else {
                audioPlayer.play();
                playPauseBtn.textContent = "‚è∏";
            }
            isPlaying = !isPlaying;
        }

        function playPrevious() {
            currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length; 
            loadSong();
        }

        function playNext() {
            currentSongIndex = (currentSongIndex + 1) % songs.length;
            loadSong();
        }

        function loadSong() {
            audioPlayer.src = songs[currentSongIndex];
            audioPlayer.play();
            playPauseBtn.textContent = "‚è∏";
            isPlaying = true;
        }

        audioPlayer.addEventListener("ended", playNext);

        window.onload = function() {
            playRandomSong();
        }

        const backgroundMusic = document.getElementById('backgroundMusic');
        const drawSound = document.getElementById('drawSound');

        function openGacha() {
            audioPlayer.pause();
            audioPlayer.currentTime = 0;
            document.getElementById('header').style.display = 'none';
            document.getElementById('gachaButton').style.display = 'none';
            document.getElementById('loveButton').style.display = 'none';
            document.getElementById('newsButton').style.display = 'none';
            document.getElementById('gachaModal').style.display = 'flex';
            document.getElementById('characterImage').style.display = 'none'; 
            backgroundMusic.play();
        }

        function closeGacha() {
            document.getElementById('header').style.display = 'block';
            document.getElementById('gachaButton').style.display = 'block';
            document.getElementById('loveButton').style.display = 'block';
            document.getElementById('newsButton').style.display = 'block';
            document.getElementById('gachaModal').style.display = 'none';
            document.getElementById('characterImage').src = getRandomCharacter(); 
            document.getElementById('characterImage').style.display = 'block'; 

            backgroundMusic.pause();
            backgroundMusic.currentTime = 0; 
            audioPlayer.play();
        }

        const cards = [
            { name: 'Èáë', baseProbability: 0.01 },
            { name: 'Á¥´', baseProbability: 0.07 },
            { name: 'Ëìù', baseProbability: 0.92 }
        ];

        const goldCards = [
            'ÁéãÂ≠êÂÖî1', 'ÂÖàÁü•Ê¢®1','ÈáëÊ≤ôÈ±º1','Êã≥ÂáªÈ∏¶1','ÁéãÂ≠êÂÖî2',
            'ÂÖàÁü•Ê¢®2','ÈáëÊ≤ôÈ±º2','Êã≥ÂáªÈ∏¶2','ÊµÅÂÖâÂÖî','ÁúºÈïúÊ¢®',
            'ÈóªÈ¶ôÈ±º','Ë°£ÊüúÈ∏¶','ÊØõÁªíÂÖî','Â§±Â∫èÊ¢®','ËÖπËÇåÈ±º',
            'Â•∂109È∏¶','Ê®±Ëä±ÂÖî','Áù°Ë°£Ê¢®','Ê®±Ëä±È±º','‰∏ãÈõ™È∏¶'
        ];

        let goldStats = [];
        let drawCount = 0;
        let noGoldCount = 0;
        let pokedex = {};

        goldCards.forEach(card => {
            pokedex[card] = 0;
        });

        function getDrawResult() {
            drawCount++;
            noGoldCount++;
            let result;

            if (drawCount % 10 === 0) {
                result = 'Á¥´';
            } else if (noGoldCount >= 70) {
                result = getRandomGoldCard();
                recordGoldDraw(result);
                noGoldCount = 0;
            } else if (noGoldCount >= 60) {
                result = getRandomCard(0.01 + 0.1 * (noGoldCount - 60));
            } else {
                result = getRandomCard(0.01);
            }

            if (goldCards.includes(result)) {
                recordGoldDraw(result);
            }

            return result;
        }

        function drawCard() {
            const result = getDrawResult();
            if (goldCards.includes(result)) {
                showGoldCard(result);
            } else {
                showSingleCard(result);
            }
        }

        let doubleGoldCount = 0; 
        let tripleGoldCount = 0; 
        let quadraGoldCount = 0; 
        let pentaGoldCount = 0;
        let hexaGoldCount = 0;
        let heptaGoldCount = 0;
        let octaGoldCount = 0;
        let nonaGoldCount = 0;
        let decaGoldCount = 0;

        function drawMultipleCards() {
            const results = [];
            let goldCount = 0;

            for (let i = 0; i < 10; i++) {
                const result = getDrawResult();
                if (goldCards.includes(result)) {
                    goldCount++;
                }
                results.push(result);
            }

            if (goldCount === 2) {
                doubleGoldCount++;
                showSpecialEffect('ÂçÅËøûÂèåÈáëÔºÅ');
            } else if (goldCount === 3) {
                tripleGoldCount++;
                showSpecialEffect('ÂçÅËøû‰∏âÈáëÔºÅ');
            } else if (goldCount === 4) {
                quadraGoldCount++;
                showSpecialEffect('ÂçÅËøûÂõõÈáëÔºÅ');
            } else if (goldCount === 5) {
                pentaGoldCount++;
                showSpecialEffect('ÂçÅËøû‰∫îÈáëÔºÅ');
            } else if (goldCount === 6) {
                hexaGoldCount++;
                showSpecialEffect('ÂçÅËøûÂÖ≠ÈáëÔºÅ');
            } else if (goldCount === 7) {
                heptaGoldCount++;
                showSpecialEffect('ÂçÅËøû‰∏ÉÈáëÔºÅ');
            } else if (goldCount === 8) {
                octaGoldCount++;
                showSpecialEffect('ÂçÅËøûÂÖ´ÈáëÔºÅ');
            } else if (goldCount === 9) {
                nonaGoldCount++;
                showSpecialEffect('ÂçÅËøû‰πùÈáëÔºÅ');
            } else if (goldCount === 10) {
                decaGoldCount++;
                showSpecialEffect('ÂçÅËøûÂçÅÈáëÔºÅ');
            }

            showMultipleCards(results);
        }

        function showSpecialEffect(text) {
            const effectContainer = document.getElementById('special-effect-container');
            effectContainer.innerText = text; 
            effectContainer.style.display = 'block'; 

            setTimeout(() => {
                effectContainer.style.display = 'none';
            }, 3000);
        }

        function getRandomGoldCard() {
            const randomIndex = Math.floor(Math.random() * goldCards.length);
            return goldCards[randomIndex];
        }

        function getRandomCard(baseProbability) {
            const goldProbability = baseProbability;
            const purpleProbability = 0.07;
            const randomNum = Math.random();
            if (randomNum < goldProbability) {
                return getRandomGoldCard();
            } else if (randomNum < goldProbability + purpleProbability) {
                return 'Á¥´';
            } else {
                return 'Ëìù';
            }
        }

        function showSingleCard(result) {
            const cardContainer = document.getElementById('card-container');
            cardContainer.innerHTML = '';

            const cardElement = document.createElement('div');
            cardElement.className = 'card';
            if (goldCards.includes(result)) {
                cardElement.classList.add('gold-card');
            } else if (result === 'Á¥´') {
                cardElement.classList.add('purple-card');
            } else if (result === 'Ëìù') {
                cardElement.classList.add('blue-card');
            }
            cardElement.innerText = result;
            cardContainer.appendChild(cardElement);
        }

        function showMultipleCards(results) {
            const cardContainer = document.getElementById('card-container');
            cardContainer.innerHTML = '';

            const topRow = document.createElement('div');
            topRow.className = 'card-row';
            const bottomRow = document.createElement('div');
            bottomRow.className = 'card-row';

            const createCardElement = (result) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';

                let displayText = '';
                if (goldCards.includes(result)) {
                    cardElement.classList.add('gold-card');
                    displayText = 'Èáë'; 

                    setTimeout(() => {
                        cardElement.classList.add('shake'); 
                        setTimeout(() => {
                            cardElement.classList.remove('shake');
                            cardElement.classList.add('flip'); 
                            setTimeout(() => {
                                cardElement.classList.remove('flip');
                                if (result.includes('Êòü') || result.includes('ÂÖî')) {
                                    displayText = 'üê∞';
                                } else if (result.includes('Ê¢®')) {
                                    displayText = 'üçê';
                                } else if (result.includes('È±º')) {
                                    displayText = 'üêü';
                                } else if (result.includes('È∏¶')) {
                                    displayText = 'üê¶';
                                }
                                cardElement.innerText = displayText;
                            }, 1000);
                        }, 500);
                    }, 500);
                } else if (result === 'Á¥´') {
                    cardElement.classList.add('purple-card');
                    displayText = 'Á¥´';
                } else if (result === 'Ëìù') {
                    cardElement.classList.add('blue-card');
                    displayText = 'Ëìù';
                }

                cardElement.innerText = displayText;

                return cardElement;
            };

            for (let i = 0; i < results.length; i++) {
                const cardElement = createCardElement(results[i]);
                if (i < 5) {
                    topRow.appendChild(cardElement);
                } else {
                    bottomRow.appendChild(cardElement);
                }
            }

            cardContainer.appendChild(topRow);
            cardContainer.appendChild(bottomRow);
        }

        function showGoldCard(cardName) {
            const cardContainer = document.getElementById('card-container');
            cardContainer.innerHTML = '';

            const cardElement = document.createElement('div');
            cardElement.className = 'card gold-card';

            // Âá∫ÈáëÁâπÊïà
            cardElement.innerText = 'Èáë';
            cardContainer.appendChild(cardElement);
            cardElement.classList.add('shake');

            // Âª∂Ëøü1ÁßíÂêéÔºåËß¶ÂèëÁøªËΩ¨
            setTimeout(() => {
                cardElement.classList.remove('shake');
                cardElement.classList.add('flip');

                setTimeout(() => {
                    cardElement.classList.remove('flip');
                    let displayText;
                    if (cardName.includes('Êòü') || cardName.includes('ÂÖî')) {
                        displayText = '‚≠ê';
                    } else if (cardName.includes('Ê¢®')) {
                        displayText = 'üçê';
                    } else if (cardName.includes('È±º')) {
                        displayText = 'üêü';
                    } else if (cardName.includes('È∏¶')) {
                        displayText = 'üê¶';
                    } else {
                        displayText = cardName; // ÈªòËÆ§ÊòæÁ§∫Âç°ÁâáÂêçÁß∞
                    }
                    cardElement.innerText = displayText;
                }, 1000);
            }, 1000);
        }
        
        const style = document.createElement('style');
        style.innerHTML = `
            .shake {
                animation: shake 0.5s;
            }
            @keyframes shake {
                0% { transform: translate(1px, 1px) rotate(0deg); }
                10% { transform: translate(-1px, -2px) rotate(-1deg); }
                20% { transform: translate(-3px, 0px) rotate(1deg); }
                30% { transform: translate(3px, 2px) rotate(0deg); }
                40% { transform: translate(1px, -1px) rotate(1deg); }
                50% { transform: translate(-1px, 2px) rotate(-1deg); }
                60% { transform: translate(-3px, 1px) rotate(0deg); }
                70% { transform: translate(3px, 1px) rotate(-1deg); }
                80% { transform: translate(-1px, -1px) rotate(1deg); }
                90% { transform: translate(1px, 2px) rotate(0deg); }
                100% { transform: translate(1px, -2px) rotate(-1deg); }
            }
        `;
        document.head.appendChild(style);

        function recordGoldDraw(goldCard) {
            goldStats.push(noGoldCount);
            noGoldCount = 0;
            pokedex[goldCard] += 1;
            updateStats();
            updatePokedex();
            updateGoldStats();
        }

        function updateStats() {
            const statsContainer = document.getElementById('stats-list');
            statsContainer.innerHTML = '';

            const totalGolds = goldStats.length;
            const averageDraws = totalGolds > 0 ? (goldStats.reduce((sum, value) => sum + value, 0) / totalGolds).toFixed(2) : 0;

            let goldStatsString = goldStats.join(', ');
            const maxStringLength = 135; // ÁªüËÆ°‰∏≠ÊúÄÂ§ßÂ≠óÁ¨¶ÈïøÂ∫¶
            let goldStatsDisplay = goldStatsString;

            if (goldStatsString.length > maxStringLength) {
                const start = goldStats.slice(0, 16); // ÊòæÁ§∫ÂâçxÈ°π
                const end = goldStats.slice(-16);    // ÊòæÁ§∫ÊúÄÂêéxÈ°π
                goldStatsDisplay = `${start.join(', ')}, ..., ..., ${end.join(', ')}`;
            }

            statsContainer.innerHTML = `
                <p>ÊÄªÊäΩÊï∞: ${drawCount}</p>
                <p>ÊÄªÂá∫ÈáëÊ¨°Êï∞: ${totalGolds}</p>
                <p>Âπ≥ÂùáÂá∫ÈáëÊ¨°Êï∞: ${averageDraws}</p>
                <p>ÊØèÊ¨°Âá∫ÈáëÊäΩÊï∞: ${goldStatsDisplay}</p>
            `;
        }
        
        function updateGoldStats() {
            const statsContainer = document.getElementById('stats-list');
            if (doubleGoldCount > 0){
                statsContainer.innerHTML += `
                    <p>ÂèåÈáë${doubleGoldCount}Ê¨°ÔºÅ</p>`;
            }
            if (tripleGoldCount > 0){
                statsContainer.innerHTML += `
                    <p>‰∏âÈáë${tripleGoldCount}Ê¨°ÔºÅ</p>`;
            }
            if (quadraGoldCount > 0){
                statsContainer.innerHTML += `
                    <p>ÂõõÈáë${quadraGoldCount}Ê¨°ÔºÅ</p>`;
            }
            if (pentaGoldCount > 0){
                statsContainer.innerHTML += `
                    <p>‰∫îÈáë${pentaGoldCount}Ê¨°ÔºÅ</p>`;
            }
        }

        function updatePokedex() {
            const pokedexContainer = document.getElementById('pokedex-list');
            pokedexContainer.innerHTML = '';

            const screenWidth = window.innerWidth;
            let cardsPerRow = 4;
            let rowElement;
            let allObtained = true;

            for (let i = 0; i < goldCards.length; i++) {
                if (i % cardsPerRow === 0) {
                    rowElement = document.createElement('div');
                    rowElement.className = 'pokedex-row';
                    pokedexContainer.appendChild(rowElement);
                }

                const card = goldCards[i];
                const pokedexItem = document.createElement('div');
                pokedexItem.className = 'pokedex-item' + (pokedex[card] > 0 ? '' : ' unobtained');
                
                const nameElement = document.createElement('div');
                nameElement.className = 'pokedex-item-name';
                nameElement.innerText = card;

                const countElement = document.createElement('div');
                countElement.className = 'pokedex-item-count';
                countElement.innerText = pokedex[card] > 0 ? `${pokedex[card]} Âº†` : 'Êú™Ëé∑Âæó';

                pokedexItem.appendChild(nameElement);
                pokedexItem.appendChild(countElement);

                rowElement.appendChild(pokedexItem);

                if (pokedex[card] === 0) {
                    allObtained = false;
                }
            }
            if (allObtained) {
              showSpecialEffect('ÊÅ≠ÂñúËææÊàêÂÖ®ÂõæÈâ¥ÔºÅ');
            }
        }

        updatePokedex();
        window.addEventListener('resize', updatePokedex);

        function toggleStats() {
            const statsContainer = document.getElementById('stats-container');
            const pokedexContainer = document.getElementById('pokedex-container');
            
            if (statsContainer.style.display === 'none' || statsContainer.style.display === '') {
                statsContainer.style.display = 'block';
                pokedexContainer.style.display = 'none';
            } else {
                statsContainer.style.display = 'none';
            }
        }

        function togglePokedex() {
            const pokedexContainer = document.getElementById('pokedex-container');
            const statsContainer = document.getElementById('stats-container');
            
            if (pokedexContainer.style.display === 'none' || pokedexContainer.style.display === '') {
                pokedexContainer.style.display = 'block';
                statsContainer.style.display = 'none';
            } else {
                pokedexContainer.style.display = 'none';
            }
        }

        function getRandomCharacter() {
            const index = Math.floor(Math.random() * characters.length);
            return characters[index];
        }

        document.getElementById('characterImage').src = getRandomCharacter();

    </script>
</body>
</html>
